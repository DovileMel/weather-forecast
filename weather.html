<!DOCTYPE html>
<html>
 
<head>
  <title>Weather</title>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="style1.css">
  <link href="https://fonts.googleapis.com/css?family=Merriweather:700i|Roboto:300|Slabo+27px" rel="stylesheet">
</head>
 
<body>
  <div class="container-fluid">
      <div class="page-header">
          <h1><b>Weather forecast</b></h1>
          <h2>Vilnius</h2>
      </div>

      <table class="table border="0" cellpadding="0" cellspacing="0">
          <thead>
            <tr>
              <th>Date</th>
              <th>Temperature</th>
              <th>Humidity</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              <th id="row1"></th>
              <td id="temp1"></td>
              <td id="humidity1"></td>
              <td id="icon1"></td>
            </tr>
            <tr>
              <th id="row2"></th>
              <td id="temp2"></td>
              <td id="humidity2"></td>
              <td id="icon2"></td>
            </tr>
            <tr>
              <th id="row3"></th>
              <td id="temp3"></td>
              <td id="humidity3"></td>
              <td id="icon3"></td>
            </tr>
            <tr>
              <th id="row4"></th>
              <td id="temp4"></td>
              <td id="humidity4"></td>
              <td id="icon4"></td>
            </tr>
            <tr>
              <th id="row5"></th>
              <td id="temp5"></td>
              <td id="humidity5"></td>
              <td id="icon5"></td>
            </tr>
          </tbody>
      </table>



<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>

  <script>
      var xhr = new XMLHttpRequest();
      xhr.open('GET', "http://api.openweathermap.org/data/2.5/forecast?id=593116&APPID=0b585116bbfc4eb9d0aa0e46a5b6747d", true);
      xhr.send();

      xhr.onreadystatechange = processRequest;

      function processRequest(e) {
          if (xhr.readyState == 4 && xhr.status == 200) {
              var response = JSON.parse(xhr.responseText);
              console.log(response);
        


        $(document).ready(function(){  
        $("#row1").html(response.list[5].dt_txt);  
        $("#row2").html(response.list[13].dt_txt);  
        $("#row3").html(response.list[21].dt_txt); 
        $("#row4").html(response.list[29].dt_txt); 
        $("#row5").html(response.list[37].dt_txt); 

        $("#temp1").html(Math.round((response.list[5].main.temp)-273.15)).append("°C");  
        $("#temp2").html(Math.round((response.list[13].main.temp)-273.15)).append("°C");;
        $("#temp3").html(Math.round((response.list[21].main.temp)-273.15)).append("°C");;
        $("#temp4").html(Math.round((response.list[29].main.temp)-273.15)).append("°C");;
        $("#temp5").html(Math.round((response.list[37].main.temp)-273.15)).append("°C");;

        $("#humidity1").html(response.list[5].main.humidity).append("%");
        $("#humidity2").html(response.list[13].main.humidity).append("%");
        $("#humidity3").html(response.list[21].main.humidity).append("%");
        $("#humidity4").html(response.list[29].main.humidity).append("%");
        $("#humidity5").html(response.list[37].main.humidity).append("%");
      
        // iMAGES

        if(response.list[5].main.humidity>=70){
          $("#icon1").append("<img class='image sun'>");
        }
        if(response.list[5].main.humidity<70 && response.list[5].main.humidity>=40){
          $("#icon1").append("<img class='image cloudy'>");
        }
        if(response.list[5].main.humidity<40){
          $("#icon1").append("<img class='image rain'>");
        }


         if(response.list[13].main.humidity>=70){
          $("#icon2").append("<img class='image sun'>");
        }
        if(response.list[13].main.humidity<70 && response.list[13].main.humidity>=40){
          $("#icon2").append("<img class='image cloudy'>");
        }
        if(response.list[13].main.humidity<40){
          $("#icon2").append("<img class='image rain'>");
        }


         if(response.list[21].main.humidity>=70){
          $("#icon3").append("<img class='image sun'>");
        }
        if(response.list[21].main.humidity<70 && response.list[21].main.humidity>=40){
          $("#icon3").append("<img class='image cloudy'>");
        }
        if(response.list[21].main.humidity<40){
          $("#icon3").append("<img class='image rain'>");
        }


         if(response.list[29].main.humidity>=70){
          $("#icon4").append("<img class='image sun'>");
        }
        if(response.list[29].main.humidity<70 && response.list[29].main.humidity>=40){
          $("#icon4").append("<img class='image cloudy'>");
        }
        if(response.list[29].main.humidity<40){
          $("#icon4").append("<img class='image rain'>");
        }


         if(response.list[37].main.humidity>=70){
          $("#icon5").append("<img class='image sun'>");
        }
        if(response.list[37].main.humidity<70 && response.list[37].main.humidity>=40){
          $("#icon5").append("<img class='image cloudy'>");
        }
        if(response.list[37].main.humidity<40){
          $("#icon5").append("<img class='image rain'>");
        }

        });
    }
    }
  
  </script>
</body>
 
</html>